<!DOCTYPE html><html lang="en"><head prefix="og: http://ogp.me/ns#"><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>Bomberjam Javascript Starter | Bomberjam documentation</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://bomberjam-2019.github.io/starter-js.html"><link rel="alternative" hreflang="en" href="https://bomberjam-2019.github.io/starter-js.html"><link rel="icon" sizes="16x16 32x32 48x48 64x64" href="img/favicon.ico"><link rel="shortcut icon" href="img/favicon.ico"><link rel="stylesheet" href="/css/navy.css?1"><link rel="stylesheet" href="/css/prism.css"><link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="alternate" href="/atom.xml" title="Bomberjam documentation"><meta name="description" content="Bomberjam Javascript StarterWelcome to the Bomberjam Javascript Starter! In here you will find useful information about how to get started with training your bot, debugging its performance and seeing"><meta property="og:type" content="website"><meta property="og:title" content="Bomberjam Javascript Starter"><meta property="og:url" content="https://bomberjam-2019.github.io/starter-js.html"><meta property="og:site_name" content="Bomberjam documentation"><meta property="og:description" content="Bomberjam Javascript StarterWelcome to the Bomberjam Javascript Starter! In here you will find useful information about how to get started with training your bot, debugging its performance and seeing"><meta property="og:locale" content="en"><meta property="og:updated_time" content="2019-12-19T18:30:40.728Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Bomberjam Javascript Starter"><meta name="twitter:description" content="Bomberjam Javascript StarterWelcome to the Bomberjam Javascript Starter! In here you will find useful information about how to get started with training your bot, debugging its performance and seeing"></head><body><div id="container"><header id="header" class="wrapper"><div id="header-inner" class="inner"><h1 id="logo-wrap"><a href="https://bomberjam-2019.github.io" id="logo">Bomberjam documentation</a> <a href="/index.html" id="logo-docs">Documentation</a></h1><a id="mobile-nav-toggle"><span class="mobile-nav-toggle-bar"></span> <span class="mobile-nav-toggle-bar"></span> <span class="mobile-nav-toggle-bar"></span></a><div id="header-main"></div></div></header><div id="content-wrap"><div id="content" class="wrapper"><div id="content-inner"><article class="article-container" itemscope itemtype="http://schema.org/Article"><div class="article-inner"><div class="article"><div class="inner"><header class="article-header"><h1 class="article-title" itemprop="name" id="top">Bomberjam Javascript Starter</h1><a href="https://github.com/joseph-passineau/bomberjam-docs/edit/master/source/starter-js.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a></header><div class="article-content" itemprop="articleBody"><h1 id="Bomberjam-Javascript-Starter" class="article-heading"><a href="#Bomberjam-Javascript-Starter" class="headerlink" title="Bomberjam Javascript Starter"></a>Bomberjam Javascript Starter<a class="article-anchor" href="#Bomberjam-Javascript-Starter" aria-hidden="true"></a></h1><p>Welcome to the Bomberjam Javascript Starter! In here you will find useful information about how to get started with training your bot, debugging its performance and seeing it play!</p><p>If at any point you have questions, don't hesitate to poke me! (Guillaume Docquier)</p><h2 id="Setup" class="article-heading"><a href="#Setup" class="headerlink" title="Setup"></a>Setup<a class="article-anchor" href="#Setup" aria-hidden="true"></a></h2><p>You do not need Python to run this starter. If you have errors that seem related to python, ignore them.<br>You will need to install NodeJS v12 and npm to complete the exercises.</p><ul><li>If you already have node installed, check the version with <code>node -v</code></li><li>If it's not 12.x, you need to update</li></ul><p>NodeJS and npm are usually bundled together.<br>You can download NodeJS from their <a href="https://nodejs.org/en/" target="_blank" rel="noopener">official website</a> or install it through <a href="https://chocolatey.org/packages/nodejs" target="_blank" rel="noopener">chocolatey</a>.<br><code>choco install nodejs</code></p><p>Once all of this is done, run <code>npm install</code><br>Also, download the dataset we will provide you and extract it in <code>data/</code>. It might take some time.</p><p>You can test that your installation worked by running <code>node train.js</code>. You should see a bunch of numbers and a progress bar.<br>Note: Sometimes, tensorflow doesn't install properly. You'll get errors when trying to import it.<br>To fix this, you can run <code>npm run fix-tf-install-unix</code> or <code>npm run fix-tf-install-windows</code>, depending on the type of terminal you are using (do you use <code>ls</code> or <code>dir</code> ?).</p><h2 id="Project-Structure" class="article-heading"><a href="#Project-Structure" class="headerlink" title="Project Structure"></a>Project Structure<a class="article-anchor" href="#Project-Structure" aria-hidden="true"></a></h2><p>At the root level, you will find the following files and folders:</p><ul><li><code>bots/</code>: This is where you'll code. We provide you with an example of bot configuration that you need to improve.</li><li><code>data/</code>: Contains the training dataset, you need to extract the files there.</li><li><code>src/</code>: Starter code used by the starter. You do not need to edit this to succeed, but if you want to, you can do it.</li><li><code>saved-models/</code>: Contains the save files for your neural networks after training.</li><li><code>gamelogs/</code>: Contains the games replay files. Simulations you run will be saved so you can look at them afterwards.</li><li><code>play.js</code>: Use this when you want to play a live game.</li><li><code>simulate.js</code>: Use this when you want to play multiple games quickly with the same bot. You will see some useful stats about the games.</li><li><code>compare-bots.js</code>: Use this when you want to pit your models against each other. This will help you determine which one performs best.</li><li><code>test.js</code>: Use this to debug your neural network. It will output statistics about the predictions of your bot.</li><li><code>train.js</code>: Use this to train your bot.</li></ul><p>I suggest you try the scripts before starting, so you can see what each can offer you and how they work.<br>Example: <code>node simulate.js</code></p><p>Some scripts support arguments if you want to modify their behaviours:<br><code>node simulate.js NUMBER_OF_GAMES_TO_SIMULATE</code> (defaults to 10)<br><code>node compare-bots.js NUMBER_OF_GAMES_TO_PLAY_IN_EACH_STARTING_POSITION</code> (defaults to 10)<br><code>node test.js NUMBER_OF_GAMES_TO_TEST_AGAINST</code> (defaults to 25)<br><code>node train.js NUMBER_OF_GAMES_TO_LOAD_IN_MEMORY_AT_THE_SAME_TIME</code> (defaults to 50, increase with caution)</p><p>Running <code>test.js</code> and <code>simulate.js</code> will save the results in a json file alongside your saved model.</p><p>To watch your gamelogs, you need to start the server by using <code>npm run server</code>. The url for the Bomberjam UI will be displayed. Once in there, you can use the replay feature to import a gamelog file.</p><h2 id="The-Bots-Folder" class="article-heading"><a href="#The-Bots-Folder" class="headerlink" title="The Bots Folder"></a>The Bots Folder<a class="article-anchor" href="#The-Bots-Folder" aria-hidden="true"></a></h2><p>All the utility scripts provided revolve around the export in <code>bots/index.js</code>.<br>It exports the bot you want to use, which consists of 4 properties:</p><ul><li><code>newBot</code>: Function that creates a new instance of your bot class when playing / simulating.</li><li><code>modelName</code>: String used when saving / loading your model.</li><li><code>buildModel</code>: Function that creates your Tensorflow neural network when training / testing.</li><li><code>gameStateToModelInputConverter</code>: Function that takes a game state and a player id and returns the data to be fed into you neural network.</li></ul><p>If you want to try multiple models but keep the old ones, you can either branch out or create multiple folders inside <code>bots/</code> with your bot definitions. Then, in <code>bots/index.js</code>, simply export the bot you want to use.<br>You can also export <code>botsToCompare</code>. This is required for <code>compare-bots.js</code>. Fill this with 4 bots.</p><p>In a bot folder, you should find 4 files:</p><ul><li><code>index.js</code>: In here, you export the properties stated above from your other files.</li><li><code>data.js</code>: In here, you export <code>gameStateToModelInputConverter</code> and a <code>DATA_SHAPE</code> that you will need in <code>model.js</code>.</li><li><code>model.js</code>: In here, you export <code>buildModel</code> and a <code>modelName</code>. It will contain the definition of your neural network.</li></ul><p>Note that you can organize the code how you want it. The only important part are the expected exports stated earlier.</p><h2 id="The-Data-And-The-Training-Loop" class="article-heading"><a href="#The-Data-And-The-Training-Loop" class="headerlink" title="The Data And The Training Loop"></a>The Data And The Training Loop<a class="article-anchor" href="#The-Data-And-The-Training-Loop" aria-hidden="true"></a></h2><p>The provided data consists of 6,000 games generated by a very good bot.<br>Each file contains an ordered list of game states and actions taken by each bot at that state.<br>You will use the game state as your input, and the actions as your labels.</p><p>Because each game contains 4 players, each game tick is in fact 4 sets of inputs and labels.<br>The starter abstracts the "labels" part for you. Your responsibility will be to convert the game state to an actual input for your neural network.</p><p>The <code>train.js</code> script will run through all the files by batches. It will fit your model on each batch, save your model, and fit on the next batch.<br>It is VERY long to train through all the files. You do not need to train through all the files and that is why the model is saved after each batch.<br>Note that the script will also save your best model based on the validation accuracy as "MODEL_NAME-best". You can try and see if it's really better.</p><p>Note that depending on your models and the specified batch size, training might take a lot of RAM and exceed Node's limits.<br>The error when that happens looks like <code>FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory</code><br>However, you can increase this limit, like so:<br><code>node --max-old-space-size=4096 train.js</code></p><h2 id="Prop-tips" class="article-heading"><a href="#Prop-tips" class="headerlink" title="Prop tips"></a>Prop tips<a class="article-anchor" href="#Prop-tips" aria-hidden="true"></a></h2><ul><li>You can expect pretty good results after 20-30 minutes of training. If you do not start to see a good behaviour after that much training, do not try to train it longer. Focus on changing your network or your input data.</li><li>You are multiple people in your team, use your CPUs wisely!</li><li>Look at your games! It is not because you have high accuracy or score that your bot performs well.</li><li>Use the scripts. I won't tell you how to use them, but I can tell you they are very useful.</li><li>Plug your laptops, you'll need the juice.</li></ul></div><footer class="article-footer"><time class="article-footer-updated" datetime="2019-12-19T18:30:40.728Z" itemprop="dateModified">Last updated: Dec 19, 2019</time> <a href="/index.html" class="article-footer-prev"><i class="fa fa-chevron-left"></i><span>Overview</span></a><a href="/starter-csharp.html" class="article-footer-next"><span>CSharp</span><i class="fa fa-chevron-right"></i></a></footer></div></div><aside id="article-toc" role="navigation"><div id="article-toc-inner"><strong class="sidebar-title">Contents</strong><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Bomberjam-Javascript-Starter"><span class="toc-text">Bomberjam Javascript Starter</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setup"><span class="toc-text">Setup</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Project-Structure"><span class="toc-text">Project Structure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Bots-Folder"><span class="toc-text">The Bots Folder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Data-And-The-Training-Loop"><span class="toc-text">The Data And The Training Loop</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Prop-tips"><span class="toc-text">Prop tips</span></a></li></ol></li></ol><a href="#" id="article-toc-top">Back to Top</a></div></aside></div></article><aside id="sidebar" role="navigation"><div class="inner"><strong class="sidebar-title">Gameplay</strong><a href="/index.html" class="sidebar-link">Overview</a><strong class="sidebar-title">Starter Kits</strong><a href="/starter-js.html" class="sidebar-link current">Javascript</a><a href="/starter-csharp.html" class="sidebar-link">CSharp</a></div></aside></div></div></div><footer id="footer" class="wrapper"><div class="inner"><div id="footer-links"><a href="https://github.com/bomberjam-2019/bomberjam-docs" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a></div></div></footer></div><div id="mobile-nav-dimmer"></div><nav id="mobile-nav"><div id="mobile-nav-inner"><strong class="mobile-nav-title">Gameplay</strong><a href="/index.html" class="mobile-nav-link">Overview</a><strong class="mobile-nav-title">Starter Kits</strong><a href="/starter-js.html" class="mobile-nav-link current">Javascript</a><a href="/starter-csharp.html" class="mobile-nav-link">CSharp</a></div></nav><script src="https://code.jquery.com/jquery-3.4.1.min.js"></script><script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script><script type="text/javascript" src="/js/bundle.js"></script></body></html>