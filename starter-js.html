<!DOCTYPE html><html lang="en"><head prefix="og: http://ogp.me/ns#"><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>Bomberjam JavaScript Starter | Bomberjam documentation</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://bomberjam-2019.github.io/starter-js.html"><link rel="alternative" hreflang="en" href="https://bomberjam-2019.github.io/starter-js.html"><link rel="icon" sizes="16x16 32x32 48x48 64x64" href="img/favicon.ico"><link rel="shortcut icon" href="img/favicon.ico"><link rel="stylesheet" href="/css/navy.css?1"><link rel="stylesheet" href="/css/prism.css"><link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="alternate" href="/atom.xml" title="Bomberjam documentation"><meta name="description" content="Bomberjam JavaScript StarterWelcome to the Bomberjam JavaScript Starter! In here you will find useful information about how to get started with training your bot, debugging its performance and seeing"><meta property="og:type" content="website"><meta property="og:title" content="Bomberjam JavaScript Starter"><meta property="og:url" content="https://bomberjam-2019.github.io/starter-js.html"><meta property="og:site_name" content="Bomberjam documentation"><meta property="og:description" content="Bomberjam JavaScript StarterWelcome to the Bomberjam JavaScript Starter! In here you will find useful information about how to get started with training your bot, debugging its performance and seeing"><meta property="og:locale" content="en"><meta property="og:image" content="https://bomberjam-2019.github.io/img/structure.png"><meta property="og:image" content="https://bomberjam-2019.github.io/img/saved-models.png"><meta property="og:image" content="https://bomberjam-2019.github.io/img/train.gif"><meta property="og:image" content="https://bomberjam-2019.github.io/img/best-model.png"><meta property="og:image" content="https://bomberjam-2019.github.io/img/test.gif"><meta property="og:image" content="https://bomberjam-2019.github.io/img/simulate.gif"><meta property="og:image" content="https://bomberjam-2019.github.io/img/bots.png"><meta property="og:updated_time" content="2019-12-19T22:07:27.051Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Bomberjam JavaScript Starter"><meta name="twitter:description" content="Bomberjam JavaScript StarterWelcome to the Bomberjam JavaScript Starter! In here you will find useful information about how to get started with training your bot, debugging its performance and seeing"><meta name="twitter:image" content="https://bomberjam-2019.github.io/img/structure.png"></head><body><div id="container"><header id="header" class="wrapper"><div id="header-inner" class="inner"><h1 id="logo-wrap"><a href="https://bomberjam-2019.github.io" id="logo">Bomberjam documentation</a> <a href="/index.html" id="logo-docs">Documentation</a></h1><a id="mobile-nav-toggle"><span class="mobile-nav-toggle-bar"></span> <span class="mobile-nav-toggle-bar"></span> <span class="mobile-nav-toggle-bar"></span></a><div id="header-main"></div></div></header><div id="content-wrap"><div id="content" class="wrapper"><div id="content-inner"><article class="article-container" itemscope itemtype="http://schema.org/Article"><div class="article-inner"><div class="article"><div class="inner"><header class="article-header"><h1 class="article-title" itemprop="name" id="top">Bomberjam JavaScript Starter</h1><a href="https://github.com/joseph-passineau/bomberjam-docs/edit/master/source/starter-js.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a></header><div class="article-content" itemprop="articleBody"><h1 id="Bomberjam-JavaScript-Starter" class="article-heading"><a href="#Bomberjam-JavaScript-Starter" class="headerlink" title="Bomberjam JavaScript Starter"></a>Bomberjam JavaScript Starter<a class="article-anchor" href="#Bomberjam-JavaScript-Starter" aria-hidden="true"></a></h1><p>Welcome to the Bomberjam JavaScript Starter! In here you will find useful information about how to get started with training your bot, debugging its performance and seeing it play!</p><p>If at any point you have questions, don't hesitate to poke me! (Guillaume Docquier)</p><h2 id="Setup" class="article-heading"><a href="#Setup" class="headerlink" title="Setup"></a>Setup<a class="article-anchor" href="#Setup" aria-hidden="true"></a></h2><p>You do not need Python to run this starter. If you have errors that seem related to python, ignore them.<br>You will need to install NodeJS v12 and npm</p><ul><li>If you already have node installed, check the version with <code>node -v</code></li><li>If it's not 12.x, you need to update</li></ul><p>You can download NodeJS, which comes with npm, from their <a href="https://nodejs.org/en/" target="_blank" rel="noopener">official website</a> or install it through <a href="https://chocolatey.org/packages/nodejs" target="_blank" rel="noopener">chocolatey</a>.<br><code>choco install nodejs</code></p><p>Once all of this is done, run <code>npm install</code><br>Also, download the dataset we will provide you and extract it in <code>data/</code>. It might take some time.</p><p>You can test that your installation worked by running <code>node train.js</code>.<br>You should see a bunch of numbers and a progress bar.</p><ul><li>Sometimes, tensorflow doesn't install properly. You'll get errors when trying to import it.</li><li>To fix this, you can run <code>npm run fix-tf-install-unix</code> or <code>npm run fix-tf-install-windows</code>, depending on the type of terminal you are using (do you use <code>ls</code> or <code>dir</code> ?).</li></ul><h2 id="Project-Structure" class="article-heading"><a href="#Project-Structure" class="headerlink" title="Project Structure"></a>Project Structure<a class="article-anchor" href="#Project-Structure" aria-hidden="true"></a></h2><p>At the root level, you will find the following files and folders:</p><p><img src="img/structure.png" alt="Structure"></p><h3 id="data" class="article-heading"><a href="#data" class="headerlink" title="data/"></a>data/<a class="article-anchor" href="#data" aria-hidden="true"></a></h3><p>Contains the training dataset, you need to extract the files there.</p><h3 id="gamelogs" class="article-heading"><a href="#gamelogs" class="headerlink" title="gamelogs/"></a>gamelogs/<a class="article-anchor" href="#gamelogs" aria-hidden="true"></a></h3><p>Contains the games replay files. Simulations you run will be saved here so you can look at them afterwards.<br>To watch your gamelogs, you need to start the server by using <code>npm run server</code>.<br>The url for the Bomberjam UI will be displayed. Once in there, you can use the replay feature to import a gamelog file.</p><h3 id="saved-models" class="article-heading"><a href="#saved-models" class="headerlink" title="saved-models/"></a>saved-models/<a class="article-anchor" href="#saved-models" aria-hidden="true"></a></h3><p>Contains the save files for your neural networks after training.</p><p><img src="img/saved-models.png" alt="Saved Models"><br>The other scripts will use your model name to find the corresponding model in here.</p><h3 id="src" class="article-heading"><a href="#src" class="headerlink" title="src/"></a>src/<a class="article-anchor" href="#src" aria-hidden="true"></a></h3><p>Code used by the starter to make your life easier. You do not need to edit this to succeed, but if you want to, you can do it.</p><h3 id="train-js" class="article-heading"><a href="#train-js" class="headerlink" title="train.js"></a>train.js<a class="article-anchor" href="#train-js" aria-hidden="true"></a></h3><p>Use this to train your bot on the dataset. The provided data consists of 6,000 games generated by a very good bot.<br>Each file contains an ordered list of game states and actions taken by each bot at that state.<br>It will use the game state as input, and the actions as labels.</p><p><img src="img/train.gif" alt="Training"></p><p>Because each game contains 4 players, each game tick is in fact 4 sets of inputs and labels.<br>This allows you to train your bot to play as any player.<br>The starter abstracts the "labels" part for you. Your responsibility will be to convert the game state to an actual input for your neural network.</p><p>The script will run through all the files by batches. It will fit your model on each batch, save your model, and fit on the next batch.<br>It is VERY long to train through all the files. You do not need to train through all the files and that is why the model is saved after each batch.<br>Note that the script will also save your best model based on the validation accuracy as <code>MODEL_NAME-best</code>. You can try and see if it's really better.</p><p><img src="img/best-model.png" alt="Best Model"></p><p>Note that depending on your models and the specified batch size, training might exceed Node's RAM limits.<br>The error when that happens looks like:</p><ul><li><code>FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory</code></li></ul><p>However, you can increase this limit, like so:</p><ul><li><code>node --max-old-space-size=4096 train.js</code></li></ul><p>The script also supports an argument to specify how many games to load in memory at once:<br><code>node train.js 50</code> (defaults to 50, increase with caution)</p><h3 id="test-js" class="article-heading"><a href="#test-js" class="headerlink" title="test.js"></a>test.js<a class="article-anchor" href="#test-js" aria-hidden="true"></a></h3><p>Use this to debug your neural network. It will output statistics about the predictions of your bot.<br>The script supports an argument to specify how many games to test against:<br><code>node test.js 25</code> (defaults to 25)</p><p><img src="img/test.gif" alt="Training"></p><p>The results will be saved with your model in a json file.</p><h3 id="simulate-js" class="article-heading"><a href="#simulate-js" class="headerlink" title="simulate.js"></a>simulate.js<a class="article-anchor" href="#simulate-js" aria-hidden="true"></a></h3><p>Use this when you want to play multiple games quickly with the same bot. You will see some useful stats about the games.<br>The script supports an argument to specify how many games to test against:<br><code>node simulate.js 10</code> (defaults to 10)</p><p><img src="img/simulate.gif" alt="Training"></p><p>The results will be saved with your model in a json file.</p><h3 id="compare-bots-js" class="article-heading"><a href="#compare-bots-js" class="headerlink" title="compare-bots.js"></a>compare-bots.js<a class="article-anchor" href="#compare-bots-js" aria-hidden="true"></a></h3><p>Use this when you want to pit your models against each other. This will help you determine which one performs best.<br>The script supports an argument to specify how many games to play in each starting position:<br><code>node compare-bots.js 10</code> (defaults to 10)</p><h3 id="play-js" class="article-heading"><a href="#play-js" class="headerlink" title="play.js"></a>play.js<a class="article-anchor" href="#play-js" aria-hidden="true"></a></h3><p>Use this when you want to play a live game.<br>You will need to edit <code>config.json</code> for the server IP, the room ID and your player name.</p><h3 id="bots" class="article-heading"><a href="#bots" class="headerlink" title="bots/"></a>bots/<a class="article-anchor" href="#bots" aria-hidden="true"></a></h3><p>This is where you'll code. We provide you with an example of bot configuration that you need to improve.</p><p><img src="img/bots.png" alt="Training"></p><p>All the utility scripts provided to you will revolve around the export in <code>bots/index.js</code>.<br>It exports the bot you want to use, which consists of 4 properties:</p><ul><li><code>newBot</code>: Function that creates a new instance of your bot class when playing / simulating.</li><li><code>modelName</code>: String used when saving / loading your model.</li><li><code>buildModel</code>: Function that creates your Tensorflow neural network when training / testing.</li><li><code>gameStateToModelInputConverter</code>: Function that takes a game state and a player id and returns the data to be fed into you neural network.</li></ul><p>It is recommended to keep your models as you go in order to compare them.<br>To do so, create multiple folders inside <code>bots/</code> with your bot definitions.<br>Give them different names, then in <code>bots/index.js</code>, simply export the bot you want to use.<br>You can export <code>botsToCompare</code>. This is will be used by <code>compare-bots.js</code>. Fill this with 4 (different) bots.</p><p>In a bot folder, you should find 3 files:</p><ul><li><code>index.js</code>: In here, you export the properties stated above from your other files.</li><li><code>data.js</code>: In here, you export <code>gameStateToModelInputConverter</code> and a <code>DATA_SHAPE</code> that you will need in <code>model.js</code>.</li><li><code>model.js</code>: In here, you export <code>buildModel</code> and a <code>modelName</code>. It will contain the definition of your neural network.</li></ul><p>Note that you can organize the code how you want it. The only important part are the expected exports stated earlier.</p><h2 id="Prop-tips" class="article-heading"><a href="#Prop-tips" class="headerlink" title="Prop tips"></a>Prop tips<a class="article-anchor" href="#Prop-tips" aria-hidden="true"></a></h2><ul><li>You can expect results after 20-30 minutes of training. If you do not start to see a good behaviour after that much training, do not try to train it longer. Focus on changing your your input data or your network.</li><li>You are multiple people in your team, use your CPUs wisely!</li><li>Look at your games! It is not because you have high accuracy or score that your bot performs well.</li><li>Use the scripts. I won't tell you how to use them, but I can tell you they are very useful.</li><li>Plug your laptops, you'll need the juice.</li></ul></div><footer class="article-footer"><time class="article-footer-updated" datetime="2019-12-19T22:07:27.051Z" itemprop="dateModified">Last updated: Dec 19, 2019</time> <a href="/index.html" class="article-footer-prev"><i class="fa fa-chevron-left"></i><span>Overview</span></a><a href="/starter-csharp.html" class="article-footer-next"><span>C Sharp</span><i class="fa fa-chevron-right"></i></a></footer></div></div><aside id="article-toc" role="navigation"><div id="article-toc-inner"><strong class="sidebar-title">Contents</strong><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Bomberjam-JavaScript-Starter"><span class="toc-text">Bomberjam JavaScript Starter</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setup"><span class="toc-text">Setup</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Project-Structure"><span class="toc-text">Project Structure</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#data"><span class="toc-text">data/</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gamelogs"><span class="toc-text">gamelogs/</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#saved-models"><span class="toc-text">saved-models/</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#src"><span class="toc-text">src/</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#train-js"><span class="toc-text">train.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#test-js"><span class="toc-text">test.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#simulate-js"><span class="toc-text">simulate.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compare-bots-js"><span class="toc-text">compare-bots.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#play-js"><span class="toc-text">play.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bots"><span class="toc-text">bots/</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Prop-tips"><span class="toc-text">Prop tips</span></a></li></ol></li></ol><a href="#" id="article-toc-top">Back to Top</a></div></aside></div></article><aside id="sidebar" role="navigation"><div class="inner"><strong class="sidebar-title">Gameplay</strong><a href="/index.html" class="sidebar-link">Overview</a><strong class="sidebar-title">Starter Kits</strong><a href="/starter-js.html" class="sidebar-link current">JavaScript</a><a href="/starter-csharp.html" class="sidebar-link">C Sharp</a></div></aside></div></div></div><footer id="footer" class="wrapper"><div class="inner"><div id="footer-links"><a href="https://github.com/bomberjam-2019/bomberjam-docs" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a></div></div></footer></div><div id="mobile-nav-dimmer"></div><nav id="mobile-nav"><div id="mobile-nav-inner"><strong class="mobile-nav-title">Gameplay</strong><a href="/index.html" class="mobile-nav-link">Overview</a><strong class="mobile-nav-title">Starter Kits</strong><a href="/starter-js.html" class="mobile-nav-link current">JavaScript</a><a href="/starter-csharp.html" class="mobile-nav-link">C Sharp</a></div></nav><script src="https://code.jquery.com/jquery-3.4.1.min.js"></script><script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script><script type="text/javascript" src="/js/bundle.js"></script></body></html>